!function(r,e){function t(){for(var r=0;9>r;r++)for(var e=0;9>e;e++){var t=parseInt(h("*[data-coord='"+r+","+e+"']").innerHTML);t=isNaN(t)?0:t,grid[r][e]=t,0!=t&&(poss_grid[r][e].p=[t],poss_grid[r][e].u=!0,poss_grid[r][e].s=!0)}o()}function s(r,e){var t=r.indexOf(e);return-1!=t?r.splice(t,1):!1}function o(){for(var r=0;9>r;r++)for(var e=0;9>e;e++){var t=grid[r][e];0!=t&&c(r,e)}a(),i()}function a(){for(var r=0;9>r;r++)for(var e=0;9>e;e++){var t=poss_grid[r][e];if(!t.u&&t.s){var s=t.p[0];grid[r][e]=s,c(r,e)}}}function i(){for(var r=0;9>r;r++)for(var e=0;9>e;e++){var t=poss_grid[r][e].p,o=[1,2,3,4,5,6,7,8,9];if(!poss_grid[r][e].s){for(var i=0;9>i;i++){var f=poss_grid[r][i];if(i!=e&&!f.s)for(var c=0;c<f.p.length;c++)s(o,f.p[c]);var l=poss_grid[i][e];if(i!=r&&!l.s)for(var v=0;v<l.p.length;v++)s(o,l.p[v])}for(var u=d(r,e),p=u[0],g=p+3;g>p;p++)for(var h=u[1],b=h+3;b>h;h++){var _=poss_grid[p][h];if(r!=p&&e!=h&&!_.s)for(var B=0;B<_.p.length;B++)s(o,_.p[B])}for(var L=0;L<t.length;L++){var k=t[L];-1!=o.indexOf(k)&&(poss_grid[r][e].p=[k],poss_grid[r][e].s=!0)}}}a(),n()}function n(){for(;81>total_solved;)a();f(),g(),e.removeEventListener("keydown",u)}function d(r,e){if(r>=0&&2>=r){if(e>=0&&2>=e)return[0,0];if(e>=3&&5>=e)return[0,3];if(e>=6&&8>=e)return[0,6]}else if(r>=3&&5>=r){if(e>=0&&2>=e)return[3,0];if(e>=3&&5>=e)return[3,3];if(e>=6&&8>=e)return[3,6]}else if(r>=6&&8>=r){if(e>=0&&2>=e)return[6,0];if(e>=3&&5>=e)return[6,3];if(e>=6&&8>=e)return[6,6]}}function f(){for(var r=0;9>r;r++)for(var e=0;9>e;e++){var t=h("*[data-coord='"+r+","+e+"']");t.innerHTML=grid[r][e],poss_grid[r][e].u||t.classList.add("u-i")}}function c(r,e){var t,o=poss_grid[r][e],a=o.p;if(1==a.length&&!o.upd){t=a[0];for(var i=0;9>i;i++){var n=poss_grid[r][i];i==e||n.u||n.s||s(n.p,t),1==n.p.length&&(n.s=!0);var f=poss_grid[i][e];i==r||f.u||f.s||s(f.p,t),1==f.p.length&&(f.s=!0)}for(var c=d(r,e),l=c[0],v=l+3;v>l;l++)for(var u=c[1],p=u+3;p>u;u++){var g=poss_grid[l][u];r!=l&&e!=u&&(g.u||g.s||s(g.p,t),1==g.p.length&&(g.s=!0))}total_solved++,o.upd=!0}}function l(){for(var e="",t="",s=0;9>s;s++){e=0==(s+1)%3&&8!=s?"border-bottom-width: 3px;border-bottom-color: #B1B1B1;":"";for(var o=0;9>o;o++){t=0==(o+1)%3&&8!=o?"border-right-width: 3px;border-right-color: #B1B1B1;":"";var a=r.createElement("span");a.setAttribute("class","cell"),a.setAttribute("data-coord",s+","+o),a.innerHTML="&nbsp;",a.setAttribute("style",e+t),a.addEventListener("click",function(){var r=this.getAttribute("data-coord").split(",");selectedBox=[parseInt(r[0]),parseInt(r[1])],g(),this.classList.add("sel")}),h("#gridOutline").appendChild(a),8==o&&h("#gridOutline").appendChild(r.createElement("br"))}}}function v(){l();for(var r=e.grid=[],t=e.poss_grid=[],s=0;9>s;s++){r.push([]),t.push([]);for(var o=0;9>o;o++)r[s].push(0),t[s].push({u:!1,upd:!1,s:!1,p:[1,2,3,4,5,6,7,8,9]})}e.total_solved=0,e.selectedBox=[0,0],e.addEventListener("keydown",u),h("*[data-coord='0,0']").classList.add("sel"),h("#testCase").addEventListener("click",_)}function u(r){var r=e.event||r,s=r.keyCode;switch(s>=96&&105>=s&&(s-=48),s){case 13:t();break;case 37:p("l");break;case 38:p("u");break;case 39:p("r");break;case 40:p("d");break;case 46:case 8:var s=selectedBox[0],o=selectedBox[1];h("*[data-coord='"+s+","+o+"']").innerHTML="&nbsp;",r.preventDefault();break;default:var a=String.fromCharCode(s);if(a&&!isNaN(a)){a=parseInt(a);var s=selectedBox[0],o=selectedBox[1];h("*[data-coord='"+s+","+o+"']").innerHTML=a}}}function p(r){var e=selectedBox[0],t=selectedBox[1];switch(r){case"l":t>0&&t--;break;case"u":e>0&&e--;break;case"r":8>t&&t++;break;case"d":8>e&&e++}selectedBox=[e,t],g(),h("*[data-coord='"+e+","+t+"']").classList.add("sel")}function g(){for(var r=b(".sel"),e=0;e<r.length;e++)r[e].classList.remove("sel")}function h(e){return r.querySelector(e)}function b(e){return r.querySelectorAll(e)}function _(){for(var r=[[0,6,2,0,0,0,0,0,3],[0,0,1,7,0,2,5,0,0],[7,3,0,5,0,1,4,8,0],[6,0,0,4,8,7,0,0,0],[0,0,8,0,0,0,3,0,0],[0,0,0,3,1,5,0,0,4],[0,1,5,2,0,6,0,3,9],[0,0,4,9,0,8,6,0,0],[9,0,0,0,0,0,2,4,8]],e=0;9>e;e++)for(var s=0;9>s;s++)grid[e][s]=r[e][s],h("*[data-coord='"+e+","+s+"']").innerHTML=grid[e][s];t()}v()}(document,window);